<!DOCTYPE html>
<html>
<head>
    <title>Registro FerrePro</title>
</head>
<body>

<h2>Registro FerrePro</h2>

<input type="text" id="nombre" placeholder="Nombre"><br><br>
<input type="email" id="email" placeholder="Correo"><br><br>
<input type="password" id="password" placeholder="Contraseña"><br><br>

<input type="text" id="documento" placeholder="Documento"><br><br>
<input type="date" id="fecha_nacimiento"><br><br>

<select id="genero">
    <option value="">Seleccione género</option>
    <option value="Masculino">Masculino</option>
    <option value="Femenino">Femenino</option>
    <option value="Otro">Otro</option>
</select><br><br>

<input type="text" id="direccion" placeholder="Dirección"><br><br>

<select id="rol" onchange="mostrarCampos()">
    <option value="">Seleccione rol</option>
    <option value="cliente">Cliente</option>
    <option value="vendedor">Vendedor</option>
    <option value="admin">Administrador</option>
</select><br><br>

<div id="camposVendedor" style="display:none;">
    <input type="text" id="telefono" placeholder="Teléfono"><br><br>
    <input type="text" id="turno" placeholder="Turno"><br><br>
</div>

<div id="campoAdmin" style="display:none;">
    <input type="text" id="codigo_admin" placeholder="Código Admin"><br><br>
</div>

<button onclick="registrar()">Registrar</button>

<p id="resultado"></p>

<script>
function mostrarCampos() {
    const rol = document.getElementById("rol").value;
    document.getElementById("camposVendedor").style.display = "none";
    document.getElementById("campoAdmin").style.display = "none";

    if (rol === "vendedor") {
        document.getElementById("camposVendedor").style.display = "block";
    }

    if (rol === "admin") {
        document.getElementById("campoAdmin").style.display = "block";
    }
}

function registrar() {
    const data = {
        nombre: nombre.value,
        email: email.value,
        password: password.value,
        rol: rol.value,

        documento: documento.value,
        fecha_nacimiento: fecha_nacimiento.value,
        genero: genero.value,
        direccion: direccion.value,

        telefono: telefono.value,
        turno: turno.value,
        codigo_admin: codigo_admin.value
    };

    fetch("http://localhost/ferrepro_api/api/register.php", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(data => {
        resultado.innerText = JSON.stringify(data);
    });
}
</script>

</body>
</html>
